"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.bearer = void 0;
const elysia_1 = require("elysia");
const bearer = ({ extract: { body = 'access_token', query = 'access_token', header = 'Bearer' } = {
    body: 'access_token',
    query: 'access_token',
    header: 'Bearer'
} } = {
    extract: {
        body: 'access_token',
        query: 'access_token',
        header: 'Bearer'
    }
}) => new elysia_1.Elysia({
    name: '@elysiajs/bearer',
    seed: {
        body,
        query,
        header
    }
}).derive(({ query: queries, headers: { authorization } }) => ({
    get bearer() {
        if (authorization?.startsWith(header))
            return authorization.slice(header.length + 1);
        const q = queries[query];
        if (q)
            return q;
    }
}));
exports.bearer = bearer;
exports.default = exports.bearer;
